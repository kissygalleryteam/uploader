
<!DOCTYPE html>
<html>
<head>
    <meta charset="gbk" />
    <title>跨终端上传的demo</title>
    <script src="http://g.tbcdn.cn/??kissy/k/1.3.1/seed-min.js" charset="utf-8"></script>
</head>
<body id="err-page">
<div id="page">
    <div id="content" class="grid-c">
        <h2>跨终端上传的demo</h2>

        <p>必须在支持mpp消息中心的页面中才能使用</p>
        <p>手机部分的上传由常胤和国梁完成，感谢他们富有想象力的尝试。</p>
        <p>页面用户的id是：2066819382</p>
        <ul id="J_UploaderQueue" class="grid">
            <li class="g-u">
                <div class="upload-inner">
                    <b></b>
                    <div class="operate">
                        <input type="file" id="J_UploaderBtn" value="电脑上传" name="imgFile"  accept="image/*" >
                        <a class="mobile-upload-button" href="javascript:void(0);" id="J_MobileUpload" inited="1">手机上传</a>
                    </div>
                </div>
                <input type="hidden" id="J_Urls" name="urls">
            </li>
        </ul>

        <script type="text/javascript">
            var S = KISSY;
            S.use('gallery/uploader/1.5/aliUploader,gallery/uploader/1.5/themes/crossUploader/index,gallery/uploader/1.5/themes/crossUploader/style.css', function (S, AliUploader,CrossUploader) {
                //上传组件插件
                var plugins = 'gallery/uploader/1.5/plugins/auth/auth,' +
                        'gallery/uploader/1.5/plugins/urlsInput/urlsInput,' +
                        'gallery/uploader/1.5/plugins/proBars/proBars,' +
                        'gallery/uploader/1.5/plugins/filedrop/filedrop,' +
                        'gallery/uploader/1.5/plugins/preview/preview,' +
                        'gallery/uploader/1.5/plugins/imageZoom/imageZoom,'+
                        'gallery/uploader/1.5/plugins/cross/cross';

                S.use(plugins,function(S,Auth,UrlsInput,ProBars,Filedrop,Preview,ImageZoom,Cross){
                    var uploader = new AliUploader('#J_UploaderBtn');
                    //使用主题
                    uploader.theme(new CrossUploader({ queueTarget: '#J_UploaderQueue' }));
                    //验证插件
                    uploader.plug(new Auth({
                                //最多上传个数
                                max:5,
                                //图片最大允许大小
                                maxSize:5120
                            }))
                        //url保存插件
                            .plug(new UrlsInput({target:'#J_Urls'}))
                        //进度条集合
                            .plug(new ProBars())
                        //图片预览
                            .plug(new Preview())
                            .plug(new ImageZoom())
                            .plug(new Cross({
                                target:'#J_MobileUpload',
                                token:'testToken123456',
                                userId: '2066819382',
                                app : ''
                            }))
                    ;
                });
            })
        </script>
    </div>
</div>
</body>
</html>