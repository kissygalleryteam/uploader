KISSY.add("gallery/uploader/1.5/plugins/proBars/progressBar",function(d,f,h){function c(a,b){b=d.merge({wrapper:e(a)},b);c.superclass.constructor.call(this,b)}var e=f.all;d.mix(c,{tpl:{DEFAULT:'<div class="ks-progress-bar-value" data-value="{value}"></div>'},cls:{PROGRESS_BAR:"ks-progress-bar",VALUE:"ks-progress-bar-value"},event:{RENDER:"render",CHANGE:"change",SHOW:"show",HIDE:"hide"}});d.extend(c,h,{render:function(){var a=this.get("wrapper"),b=this.get("width");if(!a.length)return!1;"auto"==b&&
(b=a.parent().width());a.width(b);a.addClass(c.cls.PROGRESS_BAR);this._addAttr();!this.get("visible")&&this.hide();this.set("bar",this._create());this.fire(c.event.RENDER)},show:function(){var a=this;a.get("wrapper").fadeIn(a.get("duration"),function(){a.set("visible",!0);a.fire(c.event.SHOW,{visible:!0})})},hide:function(){var a=this;a.get("wrapper").fadeOut(a.get("duration"),function(){a.set("visible",!1);a.fire(c.event.HIDE,{visible:!1})})},_create:function(){var a=this.get("wrapper"),b=this.get("value"),
c=this.get("tpl"),b=d.substitute(c,{value:b});a.html("");return e(b).appendTo(a)},_addAttr:function(){var a=this.get("wrapper"),b=this.get("value");a.attr("role","progressbar");a.attr("aria-valuemin",0);a.attr("aria-valuemax",100);a.attr("aria-valuenow",b);return this}},{ATTRS:{wrapper:{value:""},bar:{value:""},width:{value:"auto"},value:{value:0,setter:function(a){var b=this,d=b.get("wrapper"),e=b.get("bar"),f=b.get("speed"),g;100<a&&(a=100);0>a&&(a=0);g=d.width()*(a/100);e.animate({width:g+"px"},
f,"none",function(){d.attr("aria-valuenow",a);e.attr("data-value",a);b.fire(c.event.CHANGE,{value:a,width:g})});return a}},visible:{value:!0},duration:{value:0.3},tpl:{value:c.tpl.DEFAULT},speed:{value:0.2}}});return c},{requires:["node","base"]});
